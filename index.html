<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Bowmasters</title>
  <link rel="stylesheet" href="TemplateData/style.css">
  <script async
          data-ad-client="ca-pub-2426838779592611"
          data-ad-channel="5845123589"
          data-ad-frequency-hint="30s"
          src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
  </script>
</head>

<body style="text-align: center; margin: 0">
<div id="unity-container" style="visibility: hidden; position: absolute; width: 100%; height: 100%">
  <canvas id="unity-canvas" style="width: 100%; height: 100%"></canvas>
</div>
<div id="loader" class="wrapper">
  <svg width="300" height="40" viewBox="0 0 300 40" fill="none" xmlns="http://www.w3.org/2000/svg" class="_1Hgym">
    <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="red" font-size="24" font-weight="bold" font-family="Arial, sans-serif">
      Sussybakabois
    </text>
  </svg>
  <span class="loader"></span>
</div>
<script>
  var gameInstance = null;
  var gameShouldStart = false;
  var adsAvailable = false;

  loadGame();

  window.adsbygoogle = window.adsbygoogle || [];
  var adBreak = adConfig = function(o) {adsbygoogle.push(o);}

  let adConfigPromise = new Promise((resolve, reject) => adConfig({
    preloadAdBreaks: "on",
    onReady: () => resolve(true)
  }));
  let timeoutPromise = new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve(false);
    }, 2000);
  });

  Promise.race([
    adConfigPromise,
    timeoutPromise
  ]).then((shouldShowPreRoll) => {
    if (shouldShowPreRoll) {
      showPreRoll();
    } else {
      startGame();
    }
  });

  function showPreRoll(){
    adsAvailable = true;
    adBreak({
      type: "preroll",
      adBreakDone: (placementInfo) => startGame()
    });
  }

  function startGame(){
    gameShouldStart = true;
  }

  function loadGame(){
    var container = document.querySelector("#unity-container");
    var canvas = document.querySelector("#unity-canvas");

    var buildUrl = "Build";
    var loaderUrl = buildUrl + "/Mobile.loader.js";
    var config = {
      companyName: "Playgendary Ltd",
      productName: "Bowmasters",
      productVersion: "4.5.0",
    }


    var shouldCalculateWidth = false;

    if(shouldCalculateWidth){
      var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

      var aspectRatio = 1;
      var isVertical = aspectRatio < 1;
      var condition = () => isVertical ? container.offsetHeight <= container.offsetWidth : container.offsetHeight > container.offsetWidth;
      var checkPause = (state) => {
        if(window.pgio){
          window.pgio.gamePause(state);
        } else {
          window.pgio = {};
          window.pgio.pauseRequested = state > 0;
        }
      };

      function calculateWidth() {
        if(condition()){
          if(!isVertical){
            checkPause(1);
          } else {
            if(isMobile){
              checkPause(1)
            }
          }
          var unityContainerWidth = container.offsetWidth;
          var targetWidth = container.offsetHeight * aspectRatio;
          canvas.style.width = (targetWidth / unityContainerWidth * 100) + "%";
          canvas.style.height = "100%";
        } else {
          if(!isVertical){
            checkPause(0);
          } else {
            if(isMobile){
              checkPause(0)
            }
          }
          canvas.style.width = "100%";
          canvas.style.height = "100%";
        }
      }

      calculateWidth();
      window.addEventListener('resize', calculateWidth);
    }

    var buildType = "Dual";
    if(buildType === "Dual"){
      if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
        // By default Unity keeps WebGL canvas render target size matched with
        // the DOM size of the canvas element (scaled by window.devicePixelRatio)
        // Set this to false if you want to decouple this synchronization from
        // happening inside the engine, and you would instead like to size up
        // the canvas DOM size and WebGL render target sizes yourself.
        // config.matchWebGLToCanvasSize = false;
        // config.devicePixelRatio = 1;

        buildUrl = "Mobile/Build";
        config.dataUrl = buildUrl + "/db4321056fbcd467b2b2839324535ea9.data.br";
        config.frameworkUrl = buildUrl + "/10669e744807930048598ccd29d1257f.js.br";
        config.codeUrl = buildUrl + "/dc5a7d77af9536c89a8691a428517e44.wasm.br";
        config.streamingAssetsUrl = "Mobile/StreamingAssets";

        loaderUrl = buildUrl + "/Mobile.loader.js";
        console.log("selected mobile build")
      } else {
        buildUrl = "Build";

        config.dataUrl = "https://dl.dropboxusercontent.com/scl/fi/7ms4murryx5arvnm4mym2/0ce7d72e8ede967e94395cffda102012.data.br?rlkey=k0hfcit49iddxftrmadtrasmo&st=89svhb0i&dl=0";
        config.frameworkUrl = buildUrl + "/10669e744807930048598ccd29d1257f.js.br";
        config.codeUrl = "https://dl.dropboxusercontent.com/scl/fi/e669f0kok0wpxpybx7w3p/dc5a7d77af9536c89a8691a428517e44.wasm.br?rlkey=h9omnoerogcv2g1nu0r867o68&st=758804qc&dl=0";
        config.streamingAssetsUrl = "Desktop/StreamingAssets";

        loaderUrl = buildUrl + "/Desktop.loader.js";
        console.log("selected desktop build")
      }
    } else {
      config.dataUrl = buildUrl + "/db4321056fbcd467b2b2839324535ea9.data.br";
      config.frameworkUrl = buildUrl + "/10669e744807930048598ccd29d1257f.js.br";
      config.codeUrl = buildUrl + "/dc5a7d77af9536c89a8691a428517e44.wasm.br";
      config.streamingAssetsUrl = "StreamingAssets";
      console.log("single build")
    }

    var loader = document.getElementById("loader");
    var script = document.createElement("script");
    script.src = loaderUrl;
    script.onload = () => {
      createUnityInstance(canvas, config).then((unityInstance) => {
        gameInstance = unityInstance;
      }).catch((message) => {
        alert(message);
      });
    };
    document.body.appendChild(script);
  }
</script>
</body>

</html>
